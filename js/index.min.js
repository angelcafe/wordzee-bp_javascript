function ajax(e=null){let t=new Headers;t.append("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");let n={method:"POST",headers:t,body:e,cache:"no-cache"};var a=new Request("https://angelcastro.es/wordzee/back/buscapalabras.php",n);fetch(a).then(e=>{if(200==e.status)return e.json();throw"Respuesta incorrecta del servidor"}).then(function(e){palabrasCargadas(e)}).catch(function(e){console.log(e)})}function alerta(e,t){var n=document.getElementById("liveAlertPlaceholder"),a=document.createElement("div");a.innerHTML='<div class="alert alert-'+t+' alert-dismissible" role="alert">'+e+'<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button></div>',n.append(a)}function buscarPalabras(){if(Array.from(document.querySelectorAll("input[required]")).every(e=>""!=e.value)){var e=document.forms[0];fPuntosExtra(e),fLetrasDisponibles(e),fRonda(e),fPalabrasEncontradas(),document.querySelectorAll("td.palenc").forEach(e=>e.addEventListener("click",copiarEncontradaDisponibles))}else alerta("Hay que rellenar todas las Letras disponibles","danger")}function cambiarValorBotones(e){const t=e.srcElement;switch(t.value){case"":t.value="DL",t.className="btn btn-secondary rosa";break;case"DL":t.value="TL",t.className="btn btn-secondary bg-success";break;case"TL":t.value="",t.className="btn btn-secondary info"}}function copiarEncontradaDisponibles(e){let t=e.target.innerText.split(" ")[0];t.length>0&&(document.querySelectorAll("#letras input").forEach((e,n)=>e.value=t[n]||""),document.getElementById("letras").scrollIntoView())}function inicio(){document.getElementsByName("pal6let6")[0].value="DP",document.getElementsByName("pal6let6")[0].className="btn btn-secondary bg-primary",document.getElementsByName("pal7let7")[0].value="TP",document.getElementsByName("pal7let7")[0].className="btn btn-secondary bg-danger",document.querySelectorAll("#idPuntosExtra input").forEach(e=>e.addEventListener("click",cambiarValorBotones));document.querySelectorAll("#letras > input").forEach(e=>{e.addEventListener("keyup",t=>fLetrasInput(t,e)),e.addEventListener("click",e=>e.currentTarget.select())})}function fLetrasDisponibles(e){let t=25;for(let n=0;n<7;n++)letrasDisponibles[n]=e[t].value.toUpperCase(),t++}function fLetrasInput(e,t){var n=/^[a-jl-vx-zA-JL-VX-ZñÑ]$/;!0===n.test(t.value)?e.currentTarget.nextElementSibling&&(e.currentTarget.nextElementSibling.focus(),e.currentTarget.nextElementSibling.select()):e.currentTarget.value=""}function palabrasCargadas(e){e.forEach(function(e){vPalabras.push({nombre:e,longitud:e.length})})}function fPalabrasEncontradas(){let e=new Array,t=new Array,n=vPalabras.filter(function(e){let t=e.nombre.split(""),n=0;for(let a=0;a<t.length;a++){if(-1===letrasDisponibles.indexOf(t[a])||e.nombre.split(t[a]).length-1>letrasDisponibles.join("").split(t[a]).length-1)return!1;let r=puntos[t[a]]*puntosExtra[e.longitud][a]*ronda;6==e.longitud?r*=2:7==e.longitud&&(r*=3),n+=r}return e.puntos=n,!0});n.sort(function(e,t){return e.puntos<t.puntos?1:e.puntos>t.puntos?-1:0}),n.forEach(function(n){Array.isArray(e[n.longitud])&&Array.isArray(t[n.longitud])||(e[n.longitud]=new Array,t[n.longitud]=new Array),e[n.longitud].push(n.nombre),t[n.longitud].push(n.puntos)});const a=document.getElementById("idPalabrasEncontradas");for(;a.firstChild;)a.removeChild(a.firstChild);for(let n=0;n<10;n++){let r=document.createElement("tr");for(let a=3;a<8;a++){let l=document.createElement("td");if(e[a][n]){l.className="palenc noselect";let r=document.createTextNode(e[a][n]+" - "+t[a][n]);l.appendChild(r)}r.appendChild(l)}a.appendChild(r)}}function fPuntosExtra(e){let t,n=0;for(let a=3;a<8;a++){puntosExtra[a]=new Array;for(let r=0;r<a;r++)t="DL"==e[n].value?2:"TL"==e[n].value?3:1,puntosExtra[a][r]=t,n++}}function restablecer(){window.location.href=window.location.href}function fRonda(e){let t=32;for(let n=0;n<5;n++){if(e[t].checked){ronda=t-31;break}t++}}var ronda,puntosExtra=new Array,letrasDisponibles=new Array,vPalabras=new Array,palabrasSugeridas=new Array,puntos=new Array;puntos={A:1,B:3,C:3,D:2,E:1,F:4,G:2,H:4,I:1,J:8,L:1,M:3,N:1,"Ñ":8,O:1,P:3,Q:5,R:1,S:1,T:1,U:1,V:4,X:8,Y:4,Z:10},function(){"use strict";"serviceWorker"in navigator&&navigator.serviceWorker.register("./sw.js"),ajax("cargar=todo"),inicio()}();